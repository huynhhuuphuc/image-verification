@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: "Inter", system-ui, sans-serif;
    height: 100%;
  }

  body {
    @apply bg-gray-50 text-gray-900;
    height: 100%;
    /* Enable smooth scrolling on all platforms */
    -webkit-overflow-scrolling: touch;
    overflow-x: hidden;
    /* Prevent rubber band scrolling on iOS */
    overscroll-behavior-y: none;
  }

  /* Ensure minimum width and proper mobile handling */
  * {
    min-width: 0;
  }

  #root {
    height: 100%;
  }
}

@layer components {
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md text-sm sm:text-base;
    min-height: 44px; /* Touch-friendly minimum */
  }

  .btn-secondary {
    @apply bg-white hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-lg border border-gray-300 transition-colors duration-200 shadow-sm hover:shadow-md text-sm sm:text-base;
    min-height: 44px; /* Touch-friendly minimum */
  }

  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6;
  }

  .card-hover {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6 hover:shadow-lg transition-shadow duration-200 cursor-pointer;
  }

  .input-field {
    @apply w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 text-sm sm:text-base;
    min-height: 44px; /* Touch-friendly minimum */
  }

  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .glass-effect {
    @apply backdrop-blur-sm bg-white/80 border border-white/20;
  }

  /* Mobile-specific utilities */
  .mobile-container {
    @apply px-4 sm:px-6 lg:px-8;
    width: 100%;
  }

  .mobile-grid {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6;
  }

  .mobile-stats-grid {
    @apply grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6;
  }

  /* Main layout classes */
  .main-layout {
    height: 100vh;
    height: 100dvh; /* Use dynamic viewport height for better mobile support */
    display: flex;
    flex-direction: row;
  }

  .main-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: none;
    min-height: 0;
  }

  @media (max-width: 640px) {
    .main-layout {
      flex-direction: column;
    }
  }
}

/* Custom scrollbar - mobile optimized */
::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* Mobile-specific styles */
@media (max-width: 640px) {
  .mobile-sidebar {
    @apply fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .mobile-sidebar.closed {
    @apply -translate-x-full;
  }

  .mobile-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 z-40;
  }
}

/* Fix for iOS Safari safe areas */
@supports (padding: max(0px)) {
  .mobile-container {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Prevent scroll chaining on modals/overlays */
.prevent-scroll {
  overflow: hidden;
  touch-action: none;
}

/* Smooth scroll for anchor links */
@media (prefers-reduced-motion: no-preference) {
  html {
    scroll-behavior: smooth;
  }
}
